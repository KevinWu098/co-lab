HOST = "0.0.0.0"
PORT = 8765

XARM_SERVO_IDS = (1, 2, 3, 4, 5, 6)
# xArm bus-servo protocol uses a 0..1000 position register.
XARM_RAW_MIN = 0
XARM_RAW_MAX = 1000
# Hiwonder xArm servos map the raw register to a 0..240 deg travel range.
XARM_MIN_ANGLE_DEG = 0.0
XARM_MAX_ANGLE_DEG = 240.0
XARM_DEFAULT_MOVE_MS = 600
XARM_MIN_MOVE_MS = 50
XARM_MAX_MOVE_MS = 5000
XARM_SAFE_READ_RETRIES = 10
XARM_SAFE_READ_DELAY_S = 0.05

AUTOMATION_CLEANUP_SEQUENCE_DEG = (
    (0.0, 120.0, 150.0, 70.0, 100.0, 210.0),
    (0.0, 120.0, 150.0, 70.0, 125.0, 210.0),
    (240.0, 120.0, 150.0, 70.0, 125.0, 210.0),
    (240.0, 120.0, 190.0, 120.0, 135.0, 210.0),
    (240.0, 120.0, 185.0, 75.0, 90.0, 210.0),
    (240.0, 120.0, 185.0, 75.0, 90.0, 30.0),
    (240.0, 120.0, 120.0, 15.0, 100.0, 20.0),
    (0.0, 120.0, 120.0, 15.0, 100.0, 20.0),
    (0.0, 120.0, 120.0, 15.0, 75.0, 20.0),
    (0, 120, 130, 100, 150, 120),
    (0, 120, 130, 100, 175, 120),
    (240, 120, 130, 100, 175, 120),
    (240, 120, 185, 75, 90, 120),
    (240.0, 120.0, 185.0, 75.0, 90.0, 210.0),
    (240, 120.0, 145.0, 60.0, 120.0, 210.0),
    (0, 120.0, 145.0, 60.0, 120.0, 210.0),
    (0, 120.0, 145.0, 95.0, 120.0, 210.0),
    (0, 120, 185, 75, 90, 120),
)

AUTOMATION_DISPENSE_ML_PER_SEND = 20.0
AUTOMATION_DISPENSE_VALVE_OPEN_S = 0.4
AUTOMATION_DISPENSE_BETWEEN_SENDS_S = 0.2
AUTOMATION_STIR_MAX_DURATION_S = 3600.0

RIG_SERVO_CHANNELS = 4
RIG_SERVO_MIN_PULSE_US = 500
RIG_SERVO_MAX_PULSE_US = 2500
RIG_SERVO_ACTUATION_RANGE = 270
RIG_BASE_ROTATION_CHANNEL = 0
RIG_BASE_ROTATION_POSITIONS = (0.0, 120.0, 240.0)
RIG_CLOSED_ANGLE = 0
RIG_OPEN_ANGLE = 90
RIG_DEFAULT_ANGLE = RIG_CLOSED_ANGLE
RIG_INIT_SERVOS_ON_START = False
RIG_STIRRER_GPIO = 4
RIG_STIRRER_CHIP = 0
RIG_STIRRER_DURATIONS_S = (1, 5, 10)
RIG_DIAGNOSTIC_SERVO_CHANNELS = (1, 2, 3)
RIG_DIAGNOSTIC_SERVO_OPEN_S = 2
RIG_DIAGNOSTIC_STIRRER_S = 5
RIG_DIAGNOSTIC_BASE_TO_VALVE_DELAY_S = 0.5
RIG_DIAGNOSTIC_POST_CLOSE_S = 0.3

THERMAL_HTTP_HOST = "0.0.0.0"
THERMAL_HTTP_PORT = 8081
THERMAL_STREAM_PATH = "/thermal.mjpeg"
THERMAL_FRAME_WIDTH = 32
THERMAL_FRAME_HEIGHT = 24
THERMAL_FRAME_SCALE = 12
THERMAL_TEXT_BAND_HEIGHT = 24
THERMAL_JPEG_QUALITY = 85
THERMAL_FALLBACK_INTERVAL_S = 0.05
THERMAL_WS_BROADCAST_INTERVAL_S = 0.25
THERMAL_CAPTURE_INTERVAL_S = 0.2
THERMAL_READ_RETRIES = 5
THERMAL_READ_RETRY_DELAY_S = 0.01
THERMAL_CAPTURE_ERROR_LOG_INTERVAL_S = 5.0

WEBCAM_STREAM_PATH = "/webcam.mjpeg"
WEBCAM_DEVICE_INDEX = 0
WEBCAM_FRAME_WIDTH = 640
WEBCAM_FRAME_HEIGHT = 480
WEBCAM_TARGET_FPS = 15
WEBCAM_JPEG_QUALITY = 80
WEBCAM_CAPTURE_INTERVAL_S = 1.0 / WEBCAM_TARGET_FPS
WEBCAM_FALLBACK_INTERVAL_S = 0.25
WEBCAM_WS_BROADCAST_INTERVAL_S = 0.5
WEBCAM_CAPTURE_ERROR_LOG_INTERVAL_S = 5.0
